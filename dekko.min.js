(function(h){h({})})(function(h){h=function(){this.refresh={counter:0,max:100};this.defaults={libs:{fingerprint:{path:"/dist/fingerprint2.min.js",options:{excludeUserAgent:!0}},jQuery:{path:"/dist/jquery.min.js"},easingjQuery:{path:"/dist/jquery.easing.min.js"}},cache:!0,async:!0,verbose:!0,modules:[],rotate:!1,path:"/sa"};this.console={moduleName:"Module: ",moduleNotFound:"Module not found: ",moduleAppendNotFound:" html element not found on this page",timeSettings:"dekko.js >> settings loaded",timeModule:"dekko.js >> module: ",
timeSeconds:", load time",easingjQuery:"jQuery easing not initialized",jQuery:"jQuery not initialized",ctErr:"Content type settings not correct",totalTime:"Total time load "};this.regex={toLocalDate:/^(\d{4}\-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}).*/,ie:/Edge|MSIE|Trident/i,mobile:/Mobi/};this.storePoint={name:"dekko:",closed:":closed",module:":module:",prev:":rotate:",easing:"easing",options:"options",rev:":r",p:":"};this.easingStoreKey=this.storePoint.name+this.storePoint.easing;this.fingerprintStoreKey=
this.storePoint.name+this.storePoint.options;this.domain=window.location.hostname||window.location.host;this.isMobile=this.regex.mobile.test(window.navigator.userAgent)?!0:!1;this.detectIEBrowser=this.regex.ie.test(window.navigator.userAgent)?!0:!1;this.XMLHttpRequest="onload"in new XMLHttpRequest?new XMLHttpRequest:new XDomainRequest;this.refreshModules=[]};h.prototype={setStore:function(a,b){return window.localStorage.setItem(a,JSON.stringify(b))},getStore:function(a){a=window.localStorage.getItem(a);
return null!==a&&"undefined"!==typeof a?JSON.parse(a):!1},delStore:function(a){return window.localStorage.removeItem(a)},exec:function(a){return window.execScript?window.execScript(a):(new Function(a))()},mergeOptions:function(a,b){for(var c in b)a[c]=b[c];return a},toLocalDateTime:function(a){return(new Date(a.replace(this.regex.toLocalDate,"$1"))).getTime()},render:function(a,b){window.dekkoModule=function(a){};this.exec(a);window.dekkoModule.call(this,b)},notice:function(a,b){"number"===typeof a.item.refresh&&
!0===a.rotate&&this.refreshOnModules(a,b);return!0===a.verbose?this.timeEnd(a.timePoint):!1},expire:function(a){var b=this.getStore(a.closePoint);return!1===b?!1:(b=!0===b[0]?Math.floor((a.date.now()-b[1])/60):!1)&&b>a.date.close?this.delStore(a.closePoint):!0},checkPage:function(a){return 0<a.filter(function(a){if(a===window.location.pathname)return!0}).length?!1:!0},xhr:function(a,b){a.cache="boolean"==typeof a.cache?a.cache:this.defaults.cache;var c=!1===a.cache?a.url+"&n="+(new Date).getTime():
a.url,e=this.XMLHttpRequest;e.open("GET",c,this.defaults.async);e.module=b;e.onload=a.success;e.send(null)},ajax:function(a){return this.xhr(a)},time:function(a){!1===this.detectIEBrowser&&console.time(a)},timeEnd:function(a){this.detectIEBrowser?console.log(a):console.timeEnd(a)},appendModule:function(a){var b,c;b=/^\#/i;c=/^[a-z]+$/i;return!0===b.test(a)&&!1===c.test(a)?document.getElementById(a.replace(b,"")):!1===b.test(a)&&!0===c.test(a)?document.getElementsByTagName(a)[0]:!1},constructParams:function(a){var b=
{},c=[],e=[],f=[];if(0===a.modules.length)return!1;for(var d=0,g=a.modules.length;d<g;d++)if(b={spm:a.spm,cache:a.cache,verbose:a.verbose,domain:this.domain,item:a.modules[d],fingerPrint:a.fingerPrint,type:a.modules[d].type,name:a.modules[d].name,delay:a.modules[d].delay,append:a.modules[d].append,mobile:"true"===a.modules[d].mobile?!0:!1,rotate:"true"===a.modules[d].rotate?!0:!1,ppm:this.storePoint.name+a.fingerPrint+this.storePoint.prev,images:"object"==typeof a.modules[d].images?a.modules[d].images:
[],timePoint:this.console.timeModule+a.modules[d].name+this.console.timeSeconds,url:a.url+"?d="+this.domain+"&m="+a.modules[d].name+"&f="+a.fingerPrint,storeName:this.storePoint.name+a.fingerPrint+this.storePoint.p+a.modules[d].type+this.storePoint.p+a.modules[d].name+this.storePoint.rev+a.modules[d].revision,date:{now:function(){return(new Date).getTime()},end:this.toLocalDateTime(a.modules[d].date.end),start:this.toLocalDateTime(a.modules[d].date.start),close:a.modules[d].closeExpire}},b.closePoint=
b.storeName+this.storePoint.closed,!("object"===typeof a.modules[d].pages&&0<a.modules[d].pages.length&&this.checkPage(a.modules[d].pages))&&!(b.date.now()<b.date.start||b.date.now()>b.date.end)&&!(!0===this.isMobile&&!1===b.mobile)&&!0!==this.expire(b))!0===b.rotate&&"undefined"!==typeof a.modules[d].refresh&&c.push(b),!0===b.rotate?e.push(b):f.push(b);a=0<e.length?this.filterModules(e,f,a):f;1<c.length&&(this.refreshModules=c);return this.getModules(a)},refreshOnModules:function(a,b){var c,e,f,
d;c="";e=jQuery("#"+a.name+"-wrap");1<this.refreshModules.length&&(this.refresh.counter<=this.refresh.max&&(c=setTimeout(function(){f=window.dekkoJS.refreshModules.filter(function(b){return b.name!==a.name&&a.append==b.append&&!1===window.dekkoJS.getStore(b.closePoint)});if(0===f.length)return clearTimeout(this);d=parseInt(Math.floor(Math.random()*f.length),10);e.fadeOut(a.item.effects.duration/2,a.item.effects.easing[1],function(){jQuery(this).clearQueue().stop(!0).remove();window.dekkoJS.getModules([f[d]])})},
a.item.refresh),e.mouseover(function(){clearTimeout(c)})),this.refresh.counter++)},filterModules:function(a,b,c){a=this.rotateModules(a,c);return b.concat(a).filter(function(a,b,c){return c.map(function(a){return a.name}).indexOf(a.name)===b})},randomModule:function(a,b){var c,e,f,d,g=0;d=!0;if(0===b.length)return!1;for(c=b[0].ppm+b[0].append;d;)f=this.getStore(c)?this.getStore(c):0,e=parseInt(Math.floor(Math.random()*b.length),10),d="undefined"!==typeof this.getStore(b[e].closePoint)[0]?this.getStore(b[e].closePoint)[0]:
!1,d=e!==f&&!0!==d?!1:!0,g>2*b.length&&(e=f,d=!1),g++;this.setStore(c,e);return b[e]},accumulateModulesByAppend:function(a){for(var b={},c=0,e=a.length;c<e;c++)b[a[c].append]=(b[a[c].append]||0)+1;return b},rotateModules:function(a,b){var c=[],e=[],f=0,d;for(d in this.accumulateModulesByAppend(a)){for(var g=0,h=a.length;g<h;g++)a[g].append===d&&c.push(a[g]);e[f++]=this.randomModule(b,c);c=[]}return e},getOptions:function(a){var b={};a.spm=this.storePoint.name+a.fingerPrint;a.ppm=this.storePoint.name+
a.fingerPrint+this.storePoint.prev;b.cache=a.cache;b.url=a.url+"?d="+this.domain+"&f="+a.fingerPrint;b.success=function(b){a.modules=JSON.parse(this.responseText);a.contentType=this.getResponseHeader("content-type");return"application/json"!==this.getResponseHeader("content-type")?window.dekkoJS.exceptionsMessage({message:window.dekkoJS.console.ctErr,status:"error",date:(new Date).toISOString()}):!0===window.dekkoJS.exceptionsHandler(a.modules)?window.dekkoJS.exceptionsMessage(a.modules):window.dekkoJS.constructParams(a)};
return this.xhr(b,null)},getModules:function(a){for(var b={success:function(a){this.module.cache&&!1===window.dekkoJS.getStore(this.module.storeName)&&window.dekkoJS.setStore(this.module.storeName,this.responseText);return 50>this.module.length?window.dekkoJS.exceptionsMessage({message:window.dekkoJS.console.moduleNotFound+this.module.name,status:"warning",date:(new Date).toISOString()}):window.dekkoJS.render(this.responseText,this.module)}},c=0,e=a.length;c<e;c++)b.url=a[c].url,b.cache=a[c].cache,
a[c].verbose&&this.time(a[c].timePoint),a[c].cache&&!1!==this.getStore(a[c].storeName)?this.render(this.getStore(a[c].storeName),a[c]):this.xhr(b,a[c])},exceptionsMessage:function(a){"undefined"===typeof a.stack?console.log(a.status+" "+a.message):this.detectIEBrowser?(console.log(a.status+" "+a.message),console.log(a.stack)):(console.group(a.status+" "+a.message),console.warn(a.stack),console.groupEnd(a.status+" "+a.message))},exceptionsHandler:function(a){var b=!1;switch(a.status){case "error":b=
!0;break;default:b=!1}return b},clickAdvert:function(a){var b={};b.url=a.url+"&c="+a.date.now();b.success=function(a){return!0};return this.xhr(b)},getFingerprint:function(a){var b={cache:!0};b.url=a.dekkoURL+this.defaults.libs.fingerprint.path;b.success=function(b){window.dekkoJS.exec(this.responseText);(new Fingerprint2(window.dekkoJS.defaults.libs.fingerprint.options)).get(function(b){window.dekkoJS.setStore(window.dekkoJS.fingerprintStoreKey,{clientid:b});a.fingerPrint=b;return window.dekkoJS.getOptions(a)})};
return this.xhr(b,null)},getScriptTagParams:function(){var a,b,c={};a=document.getElementsByTagName("script");for(var e=0;e<a.length;e++)/dekko\.(min\.)?js$/i.test(a[e].src)&&(b=a[e]);c.cache="false"===b.getAttribute("data-cache")?!1:!0;c.verbose="false"===b.getAttribute("data-verbose")?!1:!0;a=b.src.split("/");c.dekkoURL=a[0]+"//"+a[2];c.url=c.dekkoURL+this.defaults.path;return c},optionsPrepare:function(){var a=this.mergeOptions(this.defaults,this.getScriptTagParams());a.fingerPrint=this.getStore(this.fingerprintStoreKey).clientid;
return"undefined"===typeof a.fingerPrint?this.getFingerprint(a):this.getOptions(a)},loadJQEasing:function(){var a={},b=this.getStore(this.easingStoreKey),c=this.getScriptTagParams();a.cache=!0;a.url=c.dekkoURL+this.defaults.libs.easingjQuery.path;a.success=function(a){window.dekkoJS.exec(this.responseText);if("undefined"===typeof jQuery.easing.def)throw Error(window.dekkoJS.console.easingjQuery);window.dekkoJS.setStore(window.dekkoJS.easingStoreKey,this.responseText);return window.dekkoJS.optionsPrepare()};
if(!1===b)return this.xhr(a,null);this.exec(b);if("undefined"===typeof jQuery.easing.def)throw Error(this.console.easingjQuery);return this.optionsPrepare()},loadJQuery:function(){var a={},b=this.getScriptTagParams();a.cache=!0;a.url=b.dekkoURL+this.defaults.libs.jQuery.path;a.success=function(a){window.dekkoJS.exec(this.responseText);if("undefined"===typeof jQuery)throw Error(window.dekkoJS.console.jQuery);return"undefined"===typeof jQuery.easing.def?window.dekkoJS.loadJQEasing():window.dekkoJS.optionsPrepare()};
return this.xhr(a,null)},svg:{close:function(a){return'<svg width="'+a.width+'" height="'+a.height+'"style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality;fill-rule:evenodd; clip-rule:evenodd" viewBox="0 0 13547 13547" xml:space="preserve"><g><polygon fill="'+a.background+'" points="0,0 13547,0 13547,13547 0,13547 "/><path fill="'+a.color+'" d="M714 12832l12118 0 0 -12117 -12118 0 0 12117zm4188 -2990l1871 -1871 1871 1871 1197 -1197 -1871 -1871 1871 -1871 -1197 -1197 -1871 1871 -1871 -1871 -1197 1197 1871 1871 -1871 1871 1197 1197z"/></g></svg>'}}};
try{return window.dekkoJS=new h,"undefined"===typeof jQuery?window.dekkoJS.loadJQuery():"undefined"===typeof jQuery.easing.def?window.dekkoJS.loadJQEasing():window.dekkoJS.optionsPrepare()}catch(k){return console.log(k)}});
