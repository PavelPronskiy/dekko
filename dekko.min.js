(function(h){h({})})(function(h){h=function(){this.refresh={counter:0,max:100};this.defaults={libs:{fingerprint:{path:"/dist/fingerprint2.min.js",options:{excludeUserAgent:!0}},jQuery:{path:"/dist/jquery.min.js"},easingjQuery:{path:"/dist/jquery.easing.min.js"}},cache:!0,async:!0,verbose:!0,modules:[],rotate:!1,path:"/sa"};this.console={moduleName:"Module: ",moduleNotFound:"Module not found: ",moduleAppendNotFound:" html element not found on this page",timeSettings:"dekko.js >> settings loaded",timeModule:"dekko.js >> module: ",
timeSeconds:", load time",easingjQuery:"jQuery easing not initialized",jQuery:"jQuery not initialized",ctErr:"Content type settings not correct",totalTime:"Total time load "};this.regex={iso8601:/^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2})(\.\d+)?([+-]\d{2})\:(\d{2})$/,ie:/Edge|MSIE|Trident/i,mobile:/Mobi/};this.storePoint={name:"dekko:",closed:":closed",module:":module:",prev:":rotate:",easing:"easing",options:"options",rev:":r",p:":"};this.easingStoreKey=this.storePoint.name+this.storePoint.easing;this.fingerprintStoreKey=
this.storePoint.name+this.storePoint.options;this.domain=window.location.hostname||window.location.host;this.isMobile=this.regex.mobile.test(window.navigator.userAgent)?!0:!1;this.detectIEBrowser=this.regex.ie.test(window.navigator.userAgent)?!0:!1;this.XMLHttpRequest="onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest;this.XMLHttpRequest=new this.XMLHttpRequest};h.prototype={dateNow:function(){return Math.round((new Date).getTime()/1E3)},dateNowISO:function(){return(new Date(1E3*this.dateNow())).toISOString().match(/(\d{2}:\d{2}:\d{2})/)},
dateToUnixTimeStamp:function(a){return(a=(new Date(a.replace(this.regex.iso8601,"$1"))).getTime()/1E3)?a:!1},setStore:function(a,b){return window.localStorage.setItem(a,JSON.stringify(b))},getStore:function(a){a=window.localStorage.getItem(a);return null!==a&&"undefined"!==typeof a?JSON.parse(a):!1},delStore:function(a){return window.localStorage.removeItem(a)},exec:function(a){return window.execScript?window.execScript(a):(new Function(a))()},mergeOptions:function(a,b){for(var c in b)a[c]=b[c];return a},
render:function(a,b){window.dekkoModule=function(a){};this.exec(a);window.dekkoModule.call(this,b)},notice:function(a,b){"number"===typeof a.item.refresh&&!0===a.rotate&&this.refreshOnModules(a,b);return!0===a.verbose?this.timeEnd(a.timePoint):!1},expire:function(a){var b;b=this.getStore(a.closePoint);return!1===b?!1:(b=!0===b[0]?Math.floor((a.date.now()-b[1])/60):!1)&&b>a.date.close?this.delStore(a.closePoint):!0},checkPage:function(a){return 0<a.filter(function(a){if(a===window.location.pathname)return!0}).length?
!1:!0},xhr:function(a,b){a.cache="boolean"==typeof a.cache?a.cache:this.defaults.cache;var c=!1===a.cache?a.url+"&n="+(new Date).getTime():a.url,d=this.XMLHttpRequest;d.open("GET",c,this.defaults.async);d.module=b;d.onload=a.success;d.send(null)},ajax:function(a){return this.xhr(a)},time:function(a){!1===this.detectIEBrowser&&console.time(a)},timeEnd:function(a){this.detectIEBrowser?console.log(a):console.timeEnd(a)},appendModule:function(a){var b,c;b=/^\#/i;c=/^[a-z]+$/i;return!0===b.test(a)&&!1===
c.test(a)?document.getElementById(a.replace(b,"")):!1===b.test(a)&&!0===c.test(a)?document.getElementsByTagName(a)[0]:!1},constructParams:function(a){var b={},c=[],d=[],f=[];if(0===a.modules.length)return!1;for(var e=0,g=a.modules.length;e<g;e++)if(b={item:a.modules[e],spm:a.spm,type:a.modules[e].type,name:a.modules[e].name,delay:a.modules[e].delay,cache:a.cache,domain:this.domain,verbose:a.verbose,fingerPrint:a.fingerPrint,url:a.url+"?d="+this.domain+"&m="+a.modules[e].name+"&f="+a.fingerPrint,mobile:"true"===
a.modules[e].mobile?!0:!1,rotate:"true"===a.modules[e].rotate?!0:!1,images:"object"==typeof a.modules[e].images?a.modules[e].images:[],append:a.modules[e].append,ppm:this.storePoint.name+a.fingerPrint+this.storePoint.prev,timePoint:this.console.timeModule+a.modules[e].name+this.console.timeSeconds,storeName:this.storePoint.name+a.fingerPrint+this.storePoint.p+a.modules[e].type+this.storePoint.p+a.modules[e].name+this.storePoint.rev+a.modules[e].revision,date:{now:this.dateNow,end:this.dateToUnixTimeStamp(a.modules[e].date.end),
start:this.dateToUnixTimeStamp(a.modules[e].date.start),close:a.modules[e].closeExpire}},b.closePoint=b.storeName+this.storePoint.closed,!("object"===typeof a.modules[e].pages&&0<a.modules[e].pages.length&&this.checkPage(a.modules[e].pages))&&!(b.date.now()<b.date.start||b.date.now()>b.date.end)&&!(!0===this.isMobile&&!1===b.mobile)&&!0!==this.expire(b))!0===b.rotate&&"undefined"!==typeof a.modules[e].refresh&&c.push(b),!0===b.rotate?d.push(b):f.push(b);a=1<d.length?this.filterModules(d,f,a):f;1<
c.length&&(this.refreshModules=c);return this.getModules(a)},refreshOnModules:function(a,b){var c,d,f,e;c="";d=jQuery("#"+a.name+"-wrap");1<this.refreshModules.length&&(this.refresh.counter<=this.refresh.max&&(c=setTimeout(function(){f=window.dekkoJS.refreshModules.filter(function(b){return b.name!==a.name&&a.append==b.append&&!1===window.dekkoJS.getStore(b.closePoint)});if(0===f.length)return clearTimeout(this);e=parseInt(Math.floor(Math.random()*f.length),10);d.fadeOut(a.item.effects.duration/2,
a.item.effects.easing[1],function(){jQuery(this).clearQueue().stop(!0).remove();window.dekkoJS.getModules([f[e]])})},a.item.refresh),d.mouseover(function(){clearTimeout(c)})),this.refresh.counter++)},filterModules:function(a,b,c){a=this.rotateModules(a,c);return b.concat(a).filter(function(a,b,c){return c.map(function(a){return a.name}).indexOf(a.name)===b})},randomModule:function(a,b){var c,d,f,e,g=0;e=!0;if(0===b.length)return!1;for(c=b[0].ppm+b[0].append;e;)f=this.getStore(c)?this.getStore(c):
0,d=parseInt(Math.floor(Math.random()*b.length),10),e="undefined"!==typeof this.getStore(b[d].closePoint)[0]?this.getStore(b[d].closePoint)[0]:!1,e=d!==f&&!0!==e?!1:!0,g>2*b.length&&(d=f,e=!1),g++;this.setStore(c,d);return b[d]},accumulateModulesByAppend:function(a){for(var b={},c=0,d=a.length;c<d;c++)b[a[c].append]=(b[a[c].append]||0)+1;return b},rotateModules:function(a,b){var c=[],d=[],f=0,e;for(e in this.accumulateModulesByAppend(a)){for(var g=0,h=a.length;g<h;g++)a[g].append===e&&c.push(a[g]);
d[f++]=this.randomModule(b,c);c=[]}return d},getOptions:function(a){var b={};a.spm=this.storePoint.name+a.fingerPrint;a.ppm=this.storePoint.name+a.fingerPrint+this.storePoint.prev;b.cache=a.cache;b.url=a.url+"?d="+this.domain+"&f="+a.fingerPrint;b.success=function(b){a.modules=JSON.parse(this.responseText);a.contentType=this.getResponseHeader("content-type");return"application/json"!==this.getResponseHeader("content-type")?window.dekkoJS.exceptionsMessage({message:window.dekkoJS.console.ctErr,status:"error",
date:window.dekkoJS.dateNowISO()}):!0===window.dekkoJS.exceptionsHandler(a.modules)?window.dekkoJS.exceptionsMessage(a.modules):window.dekkoJS.constructParams(a)};return this.xhr(b,null)},getModules:function(a){for(var b={success:function(a){this.module.cache&&!1===window.dekkoJS.getStore(this.module.storeName)&&window.dekkoJS.setStore(this.module.storeName,this.responseText);return 50>this.module.length?window.dekkoJS.exceptionsMessage({message:window.dekkoJS.console.moduleNotFound+this.module.name,
status:"warning",date:window.dekkoJS.dateNowISO()}):window.dekkoJS.render(this.responseText,this.module)}},c=0,d=a.length;c<d;c++)b.url=a[c].url,b.cache=a[c].cache,a[c].verbose&&this.time(a[c].timePoint),a[c].cache&&!1!==this.getStore(a[c].storeName)?this.render(this.getStore(a[c].storeName),a[c]):this.xhr(b,a[c])},exceptionsMessage:function(a){"undefined"===typeof a.stack?console.log(a.status+" "+a.message):this.detectIEBrowser?(console.log(a.status+" "+a.message),console.log(a.stack)):(console.group(a.status+
" "+a.message),console.warn(a.stack),console.groupEnd(a.status+" "+a.message))},exceptionsHandler:function(a){var b=!1;switch(a.status){case "error":b=!0;break;default:b=!1}return b},clickAdvert:function(a){var b={};b.url=a.url+"&c="+a.date.now();b.success=function(a){return!0};return this.xhr(b)},getFingerprint:function(a){var b={cache:!0};b.url=a.dekkoURL+this.defaults.libs.fingerprint.path;b.success=function(b){window.dekkoJS.exec(this.responseText);(new Fingerprint2(window.dekkoJS.defaults.libs.fingerprint.options)).get(function(b){window.dekkoJS.setStore(window.dekkoJS.fingerprintStoreKey,
{clientid:b});a.fingerPrint=b;return window.dekkoJS.getOptions(a)})};return this.xhr(b,null)},getScriptTagParams:function(){var a,b,c={};a=document.getElementsByTagName("script");for(var d=0;d<a.length;d++)/dekko\.(min\.)?js$/i.test(a[d].src)&&(b=a[d]);c.cache="false"===b.getAttribute("data-cache")?!1:!0;c.verbose="false"===b.getAttribute("data-verbose")?!1:!0;a=b.src.split("/");c.dekkoURL=a[0]+"//"+a[2];c.url=c.dekkoURL+this.defaults.path;return c},optionsPrepare:function(){var a=this.mergeOptions(this.defaults,
this.getScriptTagParams());a.fingerPrint=this.getStore(this.fingerprintStoreKey).clientid;return"undefined"===typeof a.fingerPrint?this.getFingerprint(a):this.getOptions(a)},loadJQEasing:function(){var a={},b=this.getStore(this.easingStoreKey),c=this.getScriptTagParams();a.cache=!0;a.url=c.dekkoURL+this.defaults.libs.easingjQuery.path;a.success=function(a){window.dekkoJS.exec(this.responseText);if("undefined"===typeof jQuery.easing.def)throw Error(window.dekkoJS.console.easingjQuery);window.dekkoJS.setStore(window.dekkoJS.easingStoreKey,
this.responseText);return window.dekkoJS.optionsPrepare()};if(!1===b)return this.xhr(a,null);this.exec(b);if("undefined"===typeof jQuery.easing.def)throw Error(this.console.easingjQuery);return this.optionsPrepare()},loadJQuery:function(){var a={},b=this.getScriptTagParams();a.cache=!0;a.url=b.dekkoURL+this.defaults.libs.jQuery.path;a.success=function(a){window.dekkoJS.exec(this.responseText);if("undefined"===typeof jQuery)throw Error(window.dekkoJS.console.jQuery);return"undefined"===typeof jQuery.easing.def?
window.dekkoJS.loadJQEasing():window.dekkoJS.optionsPrepare()};return this.xhr(a,null)},svg:{close:function(a){return'<svg width="'+a.width+'" height="'+a.height+'"style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality;fill-rule:evenodd; clip-rule:evenodd" viewBox="0 0 13547 13547" xml:space="preserve"><g><polygon fill="'+a.background+'" points="0,0 13547,0 13547,13547 0,13547 "/><path fill="'+a.color+'" d="M714 12832l12118 0 0 -12117 -12118 0 0 12117zm4188 -2990l1871 -1871 1871 1871 1197 -1197 -1871 -1871 1871 -1871 -1197 -1197 -1871 1871 -1871 -1871 -1197 1197 1871 1871 -1871 1871 1197 1197z"/></g></svg>'}},
ehex:function(a){a=unescape(encodeURIComponent(a));for(var b="",c="",d=0;d<a.length;d++)c=a.charCodeAt(d),b+=c.toString(16);return b},dhex:function(a){for(var b="",c=0;c<a.length;c+=2)b+=String.fromCharCode(parseInt(a.substr(c,2),16));return decodeURIComponent(escape(b))}};try{return window.dekkoJS=new h,"undefined"===typeof jQuery?window.dekkoJS.loadJQuery():"undefined"===typeof jQuery.easing.def?window.dekkoJS.loadJQEasing():window.dekkoJS.optionsPrepare()}catch(k){return console.log(k)}});
