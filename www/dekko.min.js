!function(){"use strict";!function(){"use strict";var e=function(){this.refresh={counter:0,max:100};this.defaults={libs:{jQuery:{path:"/dist/jquery.min.js"},fingerprint:{path:"/dist/fingerprint2.min.js",options:{excludeUserAgent:true}},easingjQuery:{path:"/dist/jquery.easing.min.js"}},cache:true,async:true,verbose:true,modules:[],rotate:false,version:"0.3.0.1",path:"/sa"};this.console={moduleNotFound:"Module not found: ",moduleAppendNotFound:" html element not found on this page",dekkothrowError:"dekko.js >> [error] ",timeModule:"dekko",timeSeconds:", load time",easingjQuery:"jQuery easing not initialized",jQuery:"jQuery not initialized",ctErr:"Content type settings not correct",totalTime:"Total time load "};this.regex={toLocalDate:/^(\d{4}\-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}).*/,ie:/Edge|MSIE|Trident/i,mobile:/Mobi/};this.storePoint={name:"dekko:",closed:":closed",module:":module:",prev:"rotate:",easing:"easing",options:"options",styles:"styles",rev:":r",p:":"};this.easingStoreKey=this.storePoint.name+this.storePoint.easing;this.stylesStoreKey=this.storePoint.name+this.storePoint.styles;this.fingerprintStoreKey=this.storePoint.name+this.storePoint.options;this.domain=window.location.hostname||window.location.host;this.isMobile=this.regex.mobile.test(window.navigator.userAgent)?true:false;this.detectIEBrowser=this.regex.ie.test(window.navigator.userAgent)?true:false;this.refreshModules=[];this.xhrParams={}};e.prototype={dateNow:function(){return(new Date).getTime()},setStore:function(e,t){return window.localStorage.setItem(e,JSON.stringify(t))},getStore:function(e){var t=window.localStorage.getItem(e);return t!==null&&typeof t!=="undefined"?JSON.parse(t):false},delStore:function(e){return window.localStorage.removeItem(e)},shadowCreate:function(e){var t=jQuery(e).get(0);if(typeof t=="undefined")return this.exceptionsMessage({message:e+" "+this.console.moduleAppendNotFound,status:this.console.dekkothrowError,date:(new Date).toISOString()});return typeof t.shadowRoot==="undefined"?e:t.shadowRoot===null?t.attachShadow({mode:"open"}):t.shadowRoot},exec:function(e){return window.execScript?window.execScript(e):new Function(e)()},mergeOptions:function(e,t){for(var s in t)e[s]=t[s];return e},toLocalDateTime:function(e){return new Date(e.replace(this.regex.toLocalDate,"$1")).getTime()},render:function(e,t){window.dekkoModule=function(e){};this.exec(e);window.dekkoModule.call(this,t)},notice:function(e){if(typeof e.item.refresh==="number"&&e.rotate===true)this.refreshOnModules(e);return e.verbose===true?this.timeEnd(e.timePoint):false},expire:function(e){var t=this.getStore(e.closePoint),s,o={};if(t===false)return false;s=t[0]===true?Math.floor((e.date.now()-t[1])/1e3/60):false;return s&&s>e.date.close?this.delStore(e.closePoint):true},checkPage:function(e){var t=e.filter(function(e){if(e===window.location.pathname)return true});return t.length>0?false:true},xhr:function(e,t){var s="onload"in new XMLHttpRequest?new XMLHttpRequest:new XDomainRequest;var o=e.cache?e.url:e.url+"&n="+(new Date).getTime();s.open("GET",o,this.defaults.async);s.module=t;s.onload=e.success;s.send(null);s=null},time:function(e){if(this.detectIEBrowser===false)console.time(e)},timeEnd:function(e){if(this.detectIEBrowser)console.log(e);else console.timeEnd(e)},constructParams:function(e){var t={},s={refreshModules:[],rotates:[],defaults:[]};if(e.modules.length===0)return false;for(var o=0;o<e.modules.length;o++){t={spm:e.spm,cache:e.cache,verbose:e.verbose,domain:this.domain,item:e.modules[o],fingerPrint:e.fingerPrint,type:e.modules[o].type,name:e.modules[o].name,delay:e.modules[o].delay,append:e.modules[o].append,ppm:this.storePoint.name+this.storePoint.prev,mobile:e.modules[o].mobile===true?true:false,rotate:e.modules[o].rotate===true?true:false,style:typeof e.modules[o].css=="boolean"&&e.modules[o].css?e.url+"?d="+this.domain+"&s="+e.modules[o].name+"&f="+e.fingerPrint:false,images:typeof e.modules[o].images=="object"?e.modules[o].images:[],timePoint:this.console.timeModule+"-"+this.defaults.version+".js"+" >> "+e.modules[o].name+this.console.timeSeconds,url:e.url+"?d="+this.domain+"&m="+e.modules[o].name+"&f="+e.fingerPrint,storeName:this.storePoint.name+e.modules[o].type+this.storePoint.p+e.modules[o].name+this.storePoint.rev+e.modules[o].revision,storeNameCSS:this.storePoint.name+e.modules[o].type+this.storePoint.p+e.modules[o].name+this.storePoint.p+this.storePoint.styles+this.storePoint.rev+e.modules[o].revision,date:{now:this.dateNow,end:this.toLocalDateTime(e.modules[o].date.end),start:this.toLocalDateTime(e.modules[o].date.start),close:e.modules[o].closeExpire}};t.closePoint=t.storeName+this.storePoint.closed;if(typeof e.modules[o].pages==="object"&&e.modules[o].pages.length>0&&this.checkPage(e.modules[o].pages))continue;if(t.date.now()<t.date.start||t.date.now()>t.date.end)continue;if(this.isMobile===true&&t.mobile===false)continue;if(this.expire(t)===true)continue;if(t.rotate===true&&typeof e.modules[o].refresh!=="undefined")s.refreshModules.push(t);if(t.rotate===true)s.rotates.push(t);else s.defaults.push(t)}s.modules=s.rotates.length>0?this.filterModules(s.rotates,s.defaults,e):s.defaults;if(s.refreshModules.length>1)this.refreshModules=s.refreshModules;return this.getModules(s.modules)},refreshOnModules:function(t){var e={};e.refresh="";e.append=jQuery(t.append).get(0);if(typeof e.append==="undefined")return this.exceptionsMessage({message:t.append+" "+this.console.moduleAppendNotFound,status:this.console.dekkothrowError,date:(new Date).toISOString()});e.el=typeof e.append.shadowRoot!=="undefined"&&e.append.shadowRoot.childNodes.length>0?jQuery(e.append.shadowRoot.childNodes[0]):jQuery("#"+t.name+"-wrap");e.fn=function(){e.ref=window.dekkoJS.refreshModules.filter(function(e){return e.name!==t.name&&t.append==e.append&&window.dekkoJS.getStore(e.closePoint)===false});if(e.ref.length===0)return clearTimeout(this);e.rand=parseInt(Math.floor(Math.random()*e.ref.length),10);e.el.fadeOut(t.item.effects.duration/2,t.item.effects.easing[1],function(){jQuery(this).clearQueue().stop(true).remove();window.dekkoJS.getModules([e.ref[e.rand]])})};if(this.refreshModules.length>1){if(this.refresh.counter<=this.refresh.max){e.refresh=setTimeout(e.fn,t.item.refresh);e.el.mouseover(function(){clearTimeout(e.refresh)})}this.refresh.counter++}},filterModules:function(e,t,s){var o={};o.rotates=this.rotateModules(e,s);o.modules=t.concat(o.rotates).filter(function(e,t,s){return s.map(function(e){return e.name}).indexOf(e.name)===t});return o.modules},randomModule:function(e,t){var s,o,r,n,i=0,a=true;if(t.length===0)return false;s=t[0].ppm+t[0].append;while(a){r=this.getStore(s)?this.getStore(s):0;o=parseInt(Math.floor(Math.random()*t.length),10);n=typeof this.getStore(t[o].closePoint)[0]!=="undefined"?this.getStore(t[o].closePoint)[0]:false;a=o!==r&&n!==true?false:true;if(i>t.length*2){o=r;a=false}i++}this.setStore(s,o);return t[o]},accumulateModulesByAppend:function(e){var t={};for(var s=0,o=e.length;s<o;s++){t[e[s].append]=(t[e[s].append]||0)+1}return t},rotateModules:function(e,t){var s={g:[],l:[],i:0};for(var o in this.accumulateModulesByAppend(e)){for(var r=0,n=e.length;r<n;r++)if(e[r].append===o)s.g.push(e[r]);s.l[s.i++]=this.randomModule(t,s.g);s.g=[]}return s.l},getOptions:function(t){var e={};this.xhrParams.cache=t.cache;t.spm=this.storePoint.name;t.ppm=this.storePoint.name+this.storePoint.prev;this.xhrParams.url=t.url+"?"+"d="+this.domain+"&f="+t.fingerPrint;this.xhrParams.success=function(e){t.modules=JSON.parse(this.responseText);t.contentType=this.getResponseHeader("content-type");if(this.getResponseHeader("content-type")!=="application/json")return window.dekkoJS.exceptionsMessage({message:window.dekkoJS.console.ctErr,status:"error",date:(new Date).toISOString()});if(window.dekkoJS.exceptionsHandler(t.modules)===true)return window.dekkoJS.exceptionsMessage(t.modules);return window.dekkoJS.constructParams(t)};return this.xhr(this.xhrParams,null)},getModules:function(e){this.xhrParams.success=function(e){if(this.module.cache&&window.dekkoJS.getStore(this.module.storeName)===false)window.dekkoJS.setStore(this.module.storeName,this.responseText);if(this.module.length<50)return window.dekkoJS.exceptionsMessage({message:window.dekkoJS.console.moduleNotFound+this.module.name,status:"warning",date:(new Date).toISOString()});return window.dekkoJS.render(this.responseText,this.module)};for(var t=0,s=e.length;t<s;t++){this.xhrParams.url=e[t].url;this.xhrParams.cache=e[t].cache;if(e[t].verbose)this.time(e[t].timePoint);if(e[t].cache&&this.getStore(e[t].storeName)!==false)this.render(this.getStore(e[t].storeName),e[t]);else this.xhr(this.xhrParams,e[t])}},exceptionsMessage:function(e){if(typeof e.stack==="undefined")console.log(e.status+" "+e.message);else if(this.detectIEBrowser){console.log(e.status+" "+e.message);console.log(e.stack)}else{console.group(e.status+" "+e.message);console.warn(e.stack);console.groupEnd(e.status+" "+e.message)}},exceptionsHandler:function(e){var t=false;if(typeof e.status==="undefined")t=false;switch(e.status){case"error":t=true;break;default:t=false;break}return t},clickAdvert:function(e){var t={};this.xhrParams.url=e.url+"&c="+e.date.now();this.xhrParams.success=function(e){return true};return this.xhr(this.xhrParams)},getFingerprint:function(t){this.xhrParams.cache=true;this.xhrParams.url=t.dekkoURL+this.defaults.libs.fingerprint.path;this.xhrParams.success=function(e){window.dekkoJS.exec(this.responseText);new Fingerprint2(window.dekkoJS.defaults.libs.fingerprint.options).get(function(e){window.dekkoJS.setStore(window.dekkoJS.fingerprintStoreKey,{clientid:e});t.fingerPrint=e;return window.dekkoJS.getOptions(t)})};return this.xhr(this.xhrParams,null)},getStyles:function(t){var e=window.dekkoJS.getStore(t.storeNameCSS);if(t.cache&&e===false){this.xhrParams.cache=t.cache;this.xhrParams.url=t.style;this.xhrParams.success=function(e){window.dekkoJS.setStore(t.storeNameCSS,this.responseText);return jQuery("<style/>",{text:this.responseText}).appendTo(t.append)};return this.xhr(this.xhrParams,null)}else{return jQuery("<style/>",{text:e}).appendTo(t.append)}},getScriptTagParams:function(){var e={},t={};e.s=document.getElementsByTagName("script");for(var s=0;s<e.s.length;s++)if(/dekko\.(min\.)?js$/i.test(e.s[s].src))e.d=e.s[s];t.cache=e.d.getAttribute("data-cache")==="false"?false:true;t.verbose=e.d.getAttribute("data-verbose")==="false"?false:true;e.arr=e.d.src.split("/");t.dekkoURL=e.arr[0]+"//"+e.arr[2];t.url=t.dekkoURL+this.defaults.path;return t},optionsPrepare:function(){var e=this.mergeOptions(this.defaults,this.getScriptTagParams());e.fingerPrint=this.getStore(this.fingerprintStoreKey).clientid;return typeof e.fingerPrint==="undefined"?this.getFingerprint(e):this.getOptions(e)},loadJQEasing:function(){var e=this.getStore(this.easingStoreKey),t=this.getScriptTagParams();this.xhrParams.cache=true;this.xhrParams.url=t.dekkoURL+this.defaults.libs.easingjQuery.path;this.xhrParams.success=function(e){window.dekkoJS.exec(this.responseText);if(typeof jQuery.easing.def==="undefined")throw new Error(window.dekkoJS.console.easingjQuery);window.dekkoJS.setStore(window.dekkoJS.easingStoreKey,this.responseText);return window.dekkoJS.optionsPrepare()};if(e===false)return this.xhr(this.xhrParams,null);this.exec(e);if(typeof jQuery.easing.def==="undefined")throw new Error(this.console.easingjQuery);return this.optionsPrepare()},loadJQuery:function(){var e=this.getScriptTagParams();this.xhrParams.cache=true;this.xhrParams.url=e.dekkoURL+this.defaults.libs.jQuery.path;this.xhrParams.success=function(e){window.dekkoJS.exec(this.responseText);if(typeof jQuery==="undefined")throw new Error(window.dekkoJS.console.jQuery);if(typeof jQuery.easing.def==="undefined")return window.dekkoJS.loadJQEasing();return window.dekkoJS.optionsPrepare()};return this.xhr(this.xhrParams,null)},svg:{close:function(e){return'<svg width="'+e.width+'" height="'+e.height+'"'+'style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality;'+'fill-rule:evenodd; clip-rule:evenodd" viewBox="0 0 13547 13547" xml:space="preserve"><g>'+'<polygon fill="'+e.background+'" points="0,0 13547,0 13547,13547 0,13547 "/>'+'<path fill="'+e.color+'" d="M714 12832l12118 0 0 -12117 -12118 0 0 12117zm4188 -2990l1871 -1871 1871 1871 1197 -1197 -1871 -1871 1871 -1871 -1197 -1197 -1871 1871 -1871 -1871 -1197 1197 1871 1871 -1871 1871 1197 1197z"/>'+"</g></svg>"}}};try{window.dekkoJS=new e;if(typeof jQuery==="undefined")return window.dekkoJS.loadJQuery();if(typeof jQuery.easing.def==="undefined")return window.dekkoJS.loadJQEasing();window.dekkoJS.optionsPrepare()}catch(e){return console.log(e)}}({})}();