(function(c,b,a){c.fn.dekko=function(f,d){b.dekkoModule=function(e){};var h={},g,j=this;h.app={revision:0,cache:true,verbose:true,templateName:"default.js",modules:[],adType:"",rotate:false,path:"/media/dekko/modules",jQueryEasingUrl:"https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.js",geoTargetingUrl:"https://geoip-db.com/jsonp",staticWebStore:"//static.cdn.net"};h.ajax={async:true,type:"GET",contentType:"application/json",dataType:"json",status:{"404":"Not found","400":"Incorrect attempt","401":"Internal error"}};h.fp={excludeFlashFonts:true};h.regex={remote:/(^(https?|\/\/)|(\/|\.|\:))/gi,host:/^(https?|\/\/)/,dkm:/dekkoModule/};g={console:{timeModule:"Loaded dekko module: ",geoTargeting:", geoTargeting: ",timeSeconds:", execution time",totalTime:"Total time load "},storePoint:{name:"dekko:",closed:":closed:",options:"options:",module:":module:",modules:":modules:",prev:":rotate:",rev:":r",geo:":geo",p:":",slash:"/"},advertType:["banner","branding","popup","bar"],dateNow:function(){return Math.round(new Date().getTime()/1000)},dateToUnixTimeStamp:function(k){var e=new Date(k.split(" ").join("T"));e=e.getTime()/1000;return(e)?e:false},base64encode:function(k){return btoa(encodeURIComponent(k).replace(/%([0-9A-F]{2})/g,function e(l,m){return String.fromCharCode("0x"+m)}))},base64decode:function(e){return decodeURIComponent(atob(e).split("").map(function(k){return"%"+("00"+k.charCodeAt(0).toString(16)).slice(-2)}).join(""))},setStore:function(k,e){return b.localStorage.setItem(k,JSON.stringify(e))},getStore:function(k){var e=b.localStorage.getItem(k);return(e!==null&&typeof e!=="undefined")?JSON.parse(e):false},delStore:function(e){return b.localStorage.removeItem(e)},setCookie:function(k,m){var e=new Date(),l;e.setTime(e.getTime()+(m*24*60*60*1000));l=this.base64encode(JSON.stringify(m));a.cookie=k+"="+l+";expires="+e.toUTCString()},getCookie:function(e){var k=a.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return k?JSON.parse(this.base64decode(k[2])):null},isMobile:function(){return"ontouchstart" in b||"onmsgesturechange" in b},each:function(q,p,o){var n=Array.prototype.forEach;if(q===null){return}if(n&&q.forEach===n){q.forEach(p,o)}else{if(q.length===+q.length){for(var m=0,e=q.length;m<e;m++){if(p.call(o,q[m],m,q)==={}){return}}}else{for(var k in q){if(q.hasOwnProperty(k)){if(p.call(o,q[k],k,q)==={}){return}}}}}},map:function(n,m,k){var e=[],l=Array.prototype.map;if(n==null){return e}if(l&&n.map===l){return n.map(m,k)}this.each(n,function(q,o,p){e[e.length]=m.call(k,q,o,p)});return e},gEval:function(k,e){c.globalEval(k);return b.dekkoModule.call(this,e)},render:function(l){var e=this.getStore(l.storeName),k=(l.cache&&e!==false)?e:(l.xhr)?l.xhr:false;if(k!==false){this.gEval(k,l)}return false},notice:function(e){return(e.verbose)?this.timeEnd(e.timePoint):false},expire:function(l){var k,e;k=this.getStore(l.closePoint);if(k===false){return false}e=(k[0]===true)?Math.floor((l.date.now()-k[1])/60):false;return(e&&e>l.date.close)?this.delStore(l.closePoint):true},route:function(e,q){var k=this,n={},p=k.storePoint.name+q.fingerPrint+k.storePoint.geo,l;e.forEach(function(m){if(m===false){return false}if(m.date.now()<m.date.start||m.date.now()>m.date.end){return false}if(k.isMobile()===true&&m.mobile===false){return false}if(k.expire(m)===true){return false}l=k.getCookie(p);if(m.geoTargeting.length>0&&typeof l.cs!="undefined"){if(m.geoTargeting.indexOf(l.cs)===-1){return false}}if(m.cache&&k.getStore(m.storeName)){return k.render(m)}n.url=(m.dataStore)?m.ajaxUrl:m.url;n.crossDomain=false;n.cache=true;n.crossOrigin=true;n.dataType="script";if(m.dataStore){n.data={t:m.type,d:m.domain,m:m.name,f:m.fingerPrint}}n.error=function(o){return k.ajaxErrors(n.url+" "+o.status+" "+o.statusText)};n.success=function(o){if(!o.match(h.regex.dkm)){return false}if(k.serverExceptions(m.verbose,o,n)){return false}m.xhr=o;k.setStore(m.storeName,m.xhr);return k.render(m)};return k.ajax(n)})},randModule:function(s,e){var q,u,l,p=0,n=true,k=this;if(k.getStore(s.ppm)===false){k.setStore(s.ppm,-1)}u=k.getStore(s.ppm);while(n){q=parseInt(Math.floor(Math.random()*e.length),10);l=(typeof k.getStore(e[q].closePoint)[0]!=="undefined")?k.getStore(e[q].closePoint)[0]:false;n=(q!==u&&l!==true)?false:true;if(p>e.length*2){q=u;n=false}p++}k.setStore(s.ppm,q);return e[q]},constructParams:function(l){var p=[],m=[],w=this,v,n,t,s={},r,u,k=w.storePoint.name+l.fingerPrint+w.storePoint.geo;try{p=(l.modules&&l.modules.length>0)?l.modules:false;if(p===false){return false}if(l.verbose){w.time(null,l.spm)}t=(l.type)?l.type:"";p.forEach(function(x,o){v=Object.keys(x)[0];n=x[v];m.push({name:v,storeName:w.storePoint.name+l.fingerPrint+w.storePoint.p+t+w.storePoint.p+v+w.storePoint.rev+n.revision,closePoint:w.storePoint.name+l.fingerPrint+w.storePoint.p+t+w.storePoint.closed+v+w.storePoint.rev+n.revision,path:l.path+w.storePoint.slash+v,url:l.path+w.storePoint.slash+v+w.storePoint.slash+l.templateName,delay:n.delay,item:n,cache:l.cache,verbose:l.verbose,timePoint:w.console.timeModule+v+w.console.timeSeconds,geoTargeting:typeof n.geoTargeting=="object"?n.geoTargeting:[],append:l.element,dataStore:l.dataStore,spm:l.spm,ajaxUrl:typeof l.ajaxUrl=="undefined"?null:l.ajaxUrl,fingerPrint:l.fingerPrint,images:typeof n.images=="object"?n.images:[],excludes:typeof n.excludes=="object"?n.excludes:[],domain:b.location.hostname||b.location.host,mobile:typeof n.mobile=="object"?n.mobile:typeof n.mobile=="boolean"?n.mobile:false,type:l.type,date:{now:function(){return Math.round(new Date().getTime()/1000)},end:w.dateToUnixTimeStamp(n.date.end),start:w.dateToUnixTimeStamp(n.date.start),close:n.closeExpire}});if(l.verbose){w.time(m[o].timePoint)}});u=(l.rotate)?[w.randModule(l,m)]:m;r=c.grep(m,function(e){return(e.geoTargeting.length>0)?true:null});if(r.length>0){if(w.getCookie(k)===null){w.getGeoLocation(l).success(function(e){if(typeof e.city=="undefined"||e.city===null){if(l.verbose){console.warn("Server GEO result empty object: "+e)}return w.route(u,l)}s.cc=e.country_code;s.cn=e.country_name;s.cs=e.city;w.setCookie(k,s);return w.route(u,l)}).error(function(o,e,x){console.warn(o.status+" "+o.statusText);return w.route(u,l)})}else{return w.route(u,l)}}else{return w.route(u,l)}}catch(q){return console.error(q)}},getModules:function(n,p){var k=this,m={},l={};m.url=p.modules;m.cache=p.cache;m.context=k;m.data={};m.data.d=b.location.hostname||b.location.host;m.data.t=p.type;m.data.f=p.fingerPrint;m.crossDomain=false;m.error=function(o,e,q){return console.warn(m.url+" "+o.status+" "+o.statusText)};m.success=function(e){if(k.serverExceptions(h.verbose,e,m)){return false}l.modules=e;l.ajaxUrl=m.url;l.type=p.type;l.fingerPrint=p.fingerPrint;return k.modulesConstructor(n,l)};return this.ajax(m)},serverExceptions:function(k,m,e){var l;if(typeof h.ajax.status[m.status]!=="undefined"){this.time(null,e.url);l=(m.message)?m.message:h.ajax.status[m.status];console.error("status: "+m.status+", message: "+l);if(k){console.warn(e)}this.timeEnd(null,e.url);return true}if(typeof m=="undefined"){this.time(null,e.url);console.error("Module cannot load: "+e.url+" incorrect results");if(k){console.warn(e)}this.timeEnd(null,e.url);return true}if(m.length===0){this.time(null,e.url);console.error("Modules empty: "+e.url);if(k){console.warn(e)}this.timeEnd(null,e.url);return true}return false},ajaxErrors:function(e){throw new Error(e)},ajax:function(e){return c.ajax(e)},time:function(k,e){return(e)?console.group(e):console.time(k)},timeEnd:function(k,e){return(e)?console.groupEnd(e):console.timeEnd(k)},modulesConstructor:function(p,n){var l=this,r,k,q={},m;c.ajaxSetup(h.ajax);if(typeof n.modules=="string"){h.app.path=l.parseUrl(n.modules).prop("origin")+h.app.path}n.dataStore=typeof f=="string"&&typeof n=="object"?true:false;q=c.extend(h.app,n);q.element=p;k=(q.ajaxUrl)?q.ajaxUrl.replace(h.regex.remote,""):typeof q.modules=="string"?q.modules.replace(h.regex.remote,""):p.selector.replace(/(\.|\-)/gi,"");m=(typeof n.revision=="number")?l.storePoint.rev+q.revision:"";q.spm=l.storePoint.name+q.fingerPrint+l.storePoint.p+q.type+l.storePoint.p+k+m;q.ppm=l.storePoint.name+q.fingerPrint+l.storePoint.p+q.type+l.storePoint.p+l.storePoint.prev+k+m;r=typeof q.modules=="string"?l.getModules(p,q):l.constructParams(q);return c.when(r).done(function(){l.timeEnd(null,q.spm)})},clickAdvert:function(l){var e=this,k={};k.url=l.ajaxUrl;k.cache=true;k.context=e;k.data={};k.data.c=l.date.now();k.data.d=b.location.hostname||b.location.host;k.data.m=l.name;k.data.f=l.fingerPrint;k.error=function(n,m,o){return console.warn(k.url+" "+n.status+" "+n.statusText)};k.success=function(m){if(e.serverExceptions(l.verbose,m,k)){return false}return m};return this.ajax(k)},setClose:function(e){return this.setStore(e,[true,this.dateNow()])},parseUrl:function(k){var e=c("<a>",{href:k});return e},murmurhash3_32_gc:function(q,n){var r,s,p,e,m,k,o,l;r=q.length&3;s=q.length-r;p=n;m=3432918353;k=461845907;l=0;while(l<s){o=((q.charCodeAt(l)&255))|((q.charCodeAt(++l)&255)<<8)|((q.charCodeAt(++l)&255)<<16)|((q.charCodeAt(++l)&255)<<24);++l;o=((((o&65535)*m)+((((o>>>16)*m)&65535)<<16)))&4294967295;o=(o<<15)|(o>>>17);o=((((o&65535)*k)+((((o>>>16)*k)&65535)<<16)))&4294967295;p^=o;p=(p<<13)|(p>>>19);e=((((p&65535)*5)+((((p>>>16)*5)&65535)<<16)))&4294967295;p=(((e&65535)+27492)+((((e>>>16)+58964)&65535)<<16))}o=0;switch(r){case 3:o^=(q.charCodeAt(l+2)&255)<<16;case 2:o^=(q.charCodeAt(l+1)&255)<<8;case 1:o^=(q.charCodeAt(l)&255);o=(((o&65535)*m)+((((o>>>16)*m)&65535)<<16))&4294967295;o=(o<<15)|(o>>>17);o=(((o&65535)*k)+((((o>>>16)*k)&65535)<<16))&4294967295;p^=o}p^=q.length;p^=p>>>16;p=(((p&65535)*2246822507)+((((p>>>16)*2246822507)&65535)<<16))&4294967295;p^=p>>>13;p=((((p&65535)*3266489909)+((((p>>>16)*3266489909)&65535)<<16)))&4294967295;p^=p>>>16;return p>>>0},fingerPrintConstructor:function(){var e=[b.navigator.userAgent,b.navigator.language,screen.colorDepth,(screen.height>screen.width)?[screen.height,screen.width]:[screen.width,screen.height],new Date().getTimezoneOffset(),!!b.sessionStorage,!!b.localStorage,!!b.indexedDB,typeof(b.openDatabase),b.navigator.cpuClass,b.navigator.platform,b.navigator.doNotTrack,this.map(b.navigator.plugins,function(l){var k=this.map(l,function(m){return[m.type,m.suffixes].join("~")}).join(",");return[l.name,l.description,k].join("::")},this).join(";")];return this.murmurhash3_32_gc(e.join("###"),31)},checkjQueryEasing:function(){if(!c.easing.def){return c.getScript(h.app.jQueryEasingUrl)}else{return false}},getGeoLocation:function(l){var e=this,k={};k.url=h.app.geoTargetingUrl;k.cache=true;k.dataType="jsonp";k.jsonpCallback="callback";k.timeout=3000;k.data={};k.error=function(n,m,o){return e.serverExceptions(l.verbose,n.responseText,k)};return c.ajax(k)}};try{if(typeof b.navigator==="undefined"){throw new Error("Browser not support variable navigator")}if(typeof b.localStorage=="undefined"){throw new Error("Browser not support localStorage")}if(typeof f=="string"){d.modules=f}if(typeof f=="object"){d=f}if(typeof d!=="object"&&typeof d!=="string"){return false}if(Object.keys(d).length===0||d.modules===""){return false}d.fingerPrint=g.fingerPrintConstructor();d.local=(typeof d.modules=="object")?true:false;return c.when(g.checkjQueryEasing()).done(function(){g.modulesConstructor(j,d)})}catch(i){return console.error(i)}}})(jQuery,window,document);